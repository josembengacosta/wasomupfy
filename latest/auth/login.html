<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="robots" content="noindex, nofollow" />
    <meta name="author" content="Voosoft" />
    <meta name="theme-color" content="#FF0089" />
    <title>Entrar - Wasom Upfy - Dashboard</title>
    <link
      rel="shortcut icon"
      href="../../assets/img/icones/wasomupfy_fiv.png"
      type="image/x-icon"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link rel="stylesheet" href="../../css/login.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/josembengacosta/wasomupfy@main/css/light.css"
    />
    <style>
      .card {
        border-radius: 15px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        background: rgba(255, 255, 255, 0.95);
        margin: auto;
      }

      .btn-wasomupfy {
        background: linear-gradient(45deg, #ff0089, #ff0089);
        color: #fff;
        border: none;
        border-radius: 10px;
        padding: 5px 7px;
        font-size: 1.1rem;
        transition: all 0.3s ease;
      }

      .btn-wasomupfy:hover {
        background: linear-gradient(45deg, #e04385, #cc0070);
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(172, 19, 19, 0.2);
        color: white;
      }

      .preloader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: opacity 0.5s ease;
      }

      .loaded .preloader {
        opacity: 0;
        pointer-events: none;
      }

      .spinner-border {
        border-bottom-color: #ff0089;
        border-top-color: #ff0089;
        border-left-color: #ff0089;
      }
    </style>
  </head>

  <body data-theme="default" data-layout="fluid">
    <div class="preloader">
      <div class="spinner-border text-link" role="status">
        <span class="visually-hidden">Carregando...</span>
      </div>
    </div>
    <main class="main">
      <div class="container">
        <section class="py-3 py-lg-4">
          <div class="row justify-content-center">
            <div
              class="col-xl-4 col-lg-6 col-md-8 col-12 text-center m-auto mt-5"
            >
              <img
                src="../../assets/img/brand/wasomupfy_authentic.png"
                class="img-fluid animate__animated animate__fadeIn"
                width="90"
                height="90"
                alt="Brand-WasomUpfy"
              />
            </div>
          </div>
        </section>
        <section id="sigin">
          <div class="row justify-content-center">
            <div class="col-xl-4 col-lg-6 col-md-8 col-11 m-auto">
              <div class="card shadow-sm">
                <div class="card-body p-3">
                  <form
                    class="needs-validation"
                    method="post"
                    action="login_process.php"
                    novalidate
                  >
                    <input
                      type="hidden"
                      name="csrf_token"
                      value="<?php echo htmlspecialchars($_SESSION['csrf_token']); ?>"
                    />
                    <div class="mb-3">
                      <label for="email_user" class="form-label"
                        >E-mail <span class="text-danger">*</span></label
                      >
                      <div class="input-group">
                        <input
                          type="email"
                          class="form-control"
                          id="email_user"
                          required
                          name="email_user"
                          placeholder="Insira o endereço do e-mail"
                          maxlength="60"
                        />
                        <span class="input-group-text"
                          ><i data-feather="mail"></i
                        ></span>
                        <div class="invalid-feedback">
                          Por favor entre com um e-mail válido.
                        </div>
                        <div class="valid-feedback">O seu e-mail é válido.</div>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="password_user" class="form-label"
                        >Senha <span class="text-danger">*</span></label
                      >
                      <div class="input-group">
                        <input
                          type="password"
                          class="form-control"
                          id="password_user"
                          required
                          name="password_user"
                          placeholder="Insira a sua senha"
                          maxlength="60"
                          autocomplete="off"
                        />
                        <button
                          type="button"
                          class="btn btn-outline-secondary"
                          onclick="togglePasswordVisibility()"
                          id="mostrar"
                          aria-label="Mostrar senha"
                        >
                          <i data-feather="eye"></i>
                        </button>
                        <button
                          type="button"
                          class="btn btn-outline-secondary"
                          onclick="togglePasswordVisibility()"
                          style="display: none"
                          id="mostrar1"
                          aria-label="Esconder senha"
                        >
                          <i data-feather="eye-off"></i>
                        </button>
                        <div class="invalid-feedback">
                          Por favor insira a sua senha.
                        </div>
                      </div>
                    </div>
                    <div
                      class="mb-4 d-flex align-items-center justify-content-between"
                    >
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="remember_token"
                          name="remember_token"
                        />
                        <label class="form-check-label" for="remember_token"
                          >Lembrar-me</label
                        >
                      </div>
                      <a
                        href="forgot-password.html"
                        class="text-decoration-none text-dark"
                        >Esqueceu sua senha?</a
                      >
                    </div>
                    <div class="d-grid">
                      <button class="btn btn-wasomupfy" type="submit">
                        Conecta-se <i data-feather="arrow-right"></i>
                      </button>
                    </div>
                    <!-- <div class="text-center mt-3">
                                        <a href="register.html" class="text-decoration-underline fw-bold" style="color: #FF0089;  font-weight: bold;">Precisa de uma conta? Crie uma agora.</a>
                                    </div> -->
                  </form>
                  <!-- <div class="text-center mt-3">
                                    <a href="#support" data-bs-toggle="modal" data-bs-target="#support" class="text-decoration-none me-2" style="color: #FF0089;">Suporte</a>|
                                    <a href="#terms" data-bs-toggle="modal" data-bs-target="#terms" class="text-decoration-none me-2" style="color: #FF0089;">Termos</a>|
                                    <a href="#privacy" data-bs-toggle="modal" data-bs-target="#privacy" class="text-decoration-none me-2" style="color: #FF0089;">Privacidade</a>|
                                    <a href="../home.html" class="text-muted text-decoration-none">Voltar para home</a>
                                </div> -->

                  <div class="text-center mt-3">
                    <p>
                      Caso é um dos colaboradores e tem uma conta e bão consegue
                      acessar, ou não tem uma conta entre em contacto com a
                      <a
                        href="#"
                        class="text-decoration-none"
                        style="color: #ff0089"
                        data-bs-toggle="modal"
                        data-bs-target="#support"
                        >equipa de suporte</a
                      >
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>
    <!-- Support Modal -->
    <div
      class="modal fade"
      id="support"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
      tabindex="-1"
      aria-labelledby="supportLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <form
          action="support_process.php"
          method="post"
          class="needs-validation"
          novalidate
        >
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5 text-dark" id="supportLabel">
                Suporte
              </h1>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <p>
                Se estiver com dúvidas ou precisar de ajuda, deixe sua mensagem
                abaixo.
              </p>
              <div class="mb-3">
                <label for="email_user" class="form-label"
                  >Endereço de e-mail <span class="text-danger">*</span></label
                >
                <input
                  type="email"
                  class="form-control"
                  id="email_user"
                  required
                  name="email_user"
                  placeholder="Insira o endereço do e-mail"
                  maxlength="60"
                />
                <div class="invalid-feedback">
                  Por favor entre com um e-mail válido.
                </div>
              </div>
              <div class="mb-3">
                <label for="subject" class="form-label"
                  >Assunto <span class="text-danger">*</span></label
                >
                <input
                  type="text"
                  class="form-control"
                  id="subject"
                  required
                  name="subject"
                  placeholder="Insira o assunto"
                  maxlength="60"
                />
                <div class="invalid-feedback">Por favor insira o assunto.</div>
              </div>
              <div class="mb-3">
                <label for="messenger" class="form-label"
                  >Mensagem <span class="text-danger">*</span></label
                >
                <textarea
                  class="form-control"
                  id="messenger"
                  name="messenger"
                  rows="5"
                  maxlength="400"
                  placeholder="Escreva a mensagem..."
                  required
                ></textarea>
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Cancelar
              </button>
              <button class="btn btn-outline-primary" type="submit">
                Enviar mensagem
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Add similar optimizations for privacy and terms modals -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../js/validacao.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/josembengacosta/wasomupfy@main/js/app.js"></script>
    <script>
      window.addEventListener("load", function () {
        requestAnimationFrame(() => {
          document.querySelector("body").classList.add("loaded");
        });
      });

      function togglePasswordVisibility() {
        const passwordInput = document.getElementById("password_user");
        const mostrar = document.getElementById("mostrar");
        const mostrar1 = document.getElementById("mostrar1");
        if (!passwordInput || !mostrar || !mostrar1) return;
        if (passwordInput.type === "password") {
          passwordInput.type = "text";
          mostrar.style.display = "none";
          mostrar1.style.display = "block";
        } else {
          passwordInput.type = "password";
          mostrar1.style.display = "none";
          mostrar.style.display = "block";
        }
      }
      // Real-time email validation
      document
        .getElementById("email_user")
        .addEventListener("input", function () {
          const email = this.value;
          const feedback = this.nextElementSibling.nextElementSibling;
          if (!email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)) {
            this.classList.add("is-invalid");
            feedback.style.display = "block";
          } else {
            this.classList.remove("is-invalid");
            this.classList.add("is-valid");
            feedback.style.display = "none";
          }
        });
    </script>
  </body>
</html>
