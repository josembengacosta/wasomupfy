<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="robots" content="noindex, nofollow" />
    <meta name="author" content="Voosoft" />
    <meta name="theme-color" content="#FF0089" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <link
      rel="apple-touch-icon"
      href="../../assets/img/icones/wasomupfy_fiv_512.png"
    />
    <link
      rel="apple-touch-startup-image"
      href="../../assets/img/screenshots/splash.png"
    />
    <link rel="manifest" href="../manifest.json" />
    <title>Detalhes dos países - Wasom Upfy</title>
    <link
      rel="shortcut icon"
      href="../../assets/img/icones/wasomupfy_fiv.png"
      type="image/x-icon"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/simplebar@6.2.5/dist/simplebar.min.css"
    />
    <link
      href="
https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css
"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="../../css/dashboard-style.css" />
    <link rel="stylesheet" href="../../css/lastest-style.css" />
    <link rel="stylesheet" href="../../css/country.details.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
  </head>

  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <!-- Menu Button (Left) -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="#offcanvasMenu"
          aria-controls="offcanvasMenu"
        >
          <span class="navbar-toggler-icon"
            ><i class="bi bi-list text-white fs-1"></i
          ></span>
        </button>

        <!-- Logo (Center on Mobile, Left on Desktop) -->
        <a class="navbar-brand" href="../painel.html">
          <!-- SVG Logo Wasom Upfy -->
          <!-- <svg width="120" height="40" viewBox="0 0 120 40" xmlns="http://www.w3.org/2000/svg">
                    <rect x="2" y="2" width="116" height="36" rx="5" fill="none" stroke="#ff0089" stroke-width="2" />
                    <text x="50%" y="50%" font-family="Arial, sans-serif" font-size="20" font-weight="bold"
                        fill="#ff0089" text-anchor="middle" dominant-baseline="middle">WASOM UPFY</text>
                </svg> -->
          <span
            class="text-light"
            style="
              font-weight: bold;
              box-sizing: border-box;
              text-transform: capitalize;
              font-family: Arial, sans-serif;
            "
            >WASOM UPFY</span
          >
        </a>

        <!-- Desktop Menu -->
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav m-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="../painel.html"
                ><i class="bi bi-speedometer2"></i> Dashboard</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../launch/releases.html"
                ><i class="bi bi-disc"></i> Lançamentos</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../analytics/statistics.html"
                ><i class="bi bi-bar-chart"></i> Estatísticas</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../finances/overview.html"
                ><i class="bi bi-currency-dollar"></i> Finanças</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../artists/artists-list.html"
                ><i class="bi bi-person"></i> Artistas</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="youtube.html"
                ><i class="bi bi-youtube"></i> Unificação de canal YouTube</a
              >
            </li>
          </ul>
        </div>

        <!-- User Icon (Right) -->
        <div class="user-menu d-flex align-items-center">
          <!-- Theme Toggle Button -->
          <a class="theme-toggle text-white me-2" id="themeToggle">
            <i class="bi bi-sun" id="themeIcon"></i>
          </a>
          <a
            href="../notifications.html"
            class="text-white me-2"
            aria-label="Notificações"
          >
            <i class="bi bi-bell fs-4"></i>
            <span class="badge bg-danger">9</span>
          </a>
          <a href="#" class="text-white" data-bs-toggle="dropdown">
            <i class="bi bi-person-circle fs-4"></i>
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li>
              <a class="dropdown-item" href="../user/profile.html"
                ><i class="bi bi-person me-2"></i>
                <strong>Eleven Records</strong></a
              >
              <div class="text-white-50">
                &nbsp; &nbsp; &nbsp; &nbsp; (Conta 560108)
              </div>
            </li>
            <li>
              <hr class="dropdown-divider" />
            </li>
            <li>
              <a class="dropdown-item" href="../user/profile.html"
                ><i class="bi bi-person me-2"></i> Meu Perfil</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="../account/manage-account.html"
                ><i class="bi bi-tools me-2"></i> Gestão de Conta</a
              >
            </li>
            <li>
              <hr class="dropdown-divider" />
            </li>
            <li>
              <a class="dropdown-item" href="../page/settings.html"
                ><i class="bi bi-gear me-2"></i> Configurações</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="../page/notifications.html"
                ><i class="bi bi-bell me-2"></i> Notificações</a
              >
            </li>
            <li>
              <a
                class="dropdown-item"
                href="../services/available-services.html"
                ><i class="bi bi-star me-2"></i> Conta e serviços disponíveis</a
              >
            </li>
            <li>
              <a
                class="dropdown-item"
                href="#?logout-wasomupfy"
                data-bs-toggle="modal"
                data-bs-target="#logoutwasomupfy"
                ><i class="bi bi-box-arrow-right me-2"></i> Desconectar-se</a
              >
            </li>
            <li>
              <hr class="dropdown-divider" />
            </li>
            <li>
              <a class="dropdown-item" href="../page/sobre.html"
                ><i class="bi bi-info-circle me-2"></i> Sobre</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="../page/support.html"
                ><i class="bi bi-headset me-2"></i> Enviar pedido de suporte</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="../page/faq.html"
                ><i class="bi bi-chat-left-text me-2"></i> Perguntas
                frequentes</a
              >
            </li>
            <li>
              <a class="dropdown-item" href="../page/help.html"
                ><i class="bi bi-question-circle me-2"></i> Ajuda</a
              >
            </li>
            <li>
              <hr class="dropdown-divider" />
            </li>
            <li>
              <span class="dropdown-item-text" id="versionDropdown"></span>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Modal logout -->
    <div
      class="modal fade"
      id="logoutwasomupfy"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
      tabindex="-1"
      aria-labelledby="logoutwasomupfyLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5 text-dark" id="logoutwasomupfyLabel">
              Terminar sessão
            </h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="container">
              <div class="row justify-content-center text-center">
                <div
                  class="col-md-12 content-center justify-center text-center"
                >
                  <p class="text-center text-dark">
                    @josembengadacosta você tem certeza de que desejas terminar
                    sessão?
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <div>
              <button
                type="button"
                class="btn btn-primary"
                data-bs-dismiss="modal"
              >
                Não, continuar
              </button>
            </div>
            <div>
              <button
                class="btn btn-danger"
                type="button"
                name="logout_wasomupfy"
                onclick="logout_wasomupfy()"
              >
                Sim, terminar sessão
              </button>
            </div>
            <script type="text/javascript">
              function logout_wasomupfy() {
                window.location = "../logout";
              }
            </script>
          </div>
        </div>
      </div>
    </div>
    <!-- Modal logout fim -->

    <!-- Offcanvas Menu for Mobile -->
    <div
      class="offcanvas offcanvas-start"
      tabindex="-1"
      id="offcanvasMenu"
      aria-labelledby="offcanvasMenuLabel"
    >
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasMenuLabel">
          <!-- <svg width="120" height="40" viewBox="0 0 120 40" xmlns="http://www.w3.org/2000/svg">
                    <rect x="2" y="2" width="116" height="36" rx="5" fill="none" stroke="#ff0089" stroke-width="2" />
                    <text x="50%" y="50%" font-family="Arial, sans-serif" font-size="20" font-weight="bold"
                        fill="#ff0089" text-anchor="middle" dominant-baseline="middle">WASOM UPFY</text>
                </svg> -->
          <span
            class="text-light"
            style="
              font-weight: bold;
              box-sizing: border-box;
              text-transform: capitalize;
              font-family: Arial, sans-serif;
            "
            >WASOM UPFY</span
          >
        </h5>
        <button
          type="button"
          class="btn-close text-white"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        >
          <i class="bi bi-x-lg"></i>
        </button>
      </div>
      <div class="offcanvas-body">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link" href="../painel.html"
              ><i class="bi bi-speedometer2"></i> Dashboard</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../launch/releases.html"
              ><i class="bi bi-disc"></i> Lançamentos</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../analytics/statistics.html"
              ><i class="bi bi-bar-chart"></i> Estatísticas</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../finances/overview.html"
              ><i class="bi bi-currency-dollar"></i> Finanças</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../artists/artists-list.html"
              ><i class="bi bi-person"></i> Artistas</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="youtube.html"
              ><i class="bi bi-youtube"></i> Unificação de canal YouTube</a
            >
          </li>
        </ul>
        <div class="version-info">Versão 2.1 (2026)</div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="container my-4">
      <div class="country-header">
        <div class="country-info">
          <img id="countryFlag" src="" alt="Country Flag" />
          <h2 id="countryName">Carregando...</h2>
        </div>
        <div class="col-auto ms-auto text-end mt-n1">
          <button
            class="btn btn-back shadow-sm"
            onclick="window.location.reload()"
          >
            <i class="bi bi-repeat"></i> Actualizar
          </button>
          <button
            class="btn btn-pink"
            onclick="window.location='statistics.html#country'"
          >
            <i class="bi bi-arrow-left"></i> Voltar
          </button>
        </div>
      </div>
      <!-- Description -->
      <p class="stats-description">
        Aqui podes ver as estatísticas das músicas reproduzidas dentro deste
        região de acordo com a disponibilidade de registo.
      </p>

      <div class="date-range">
        <div>
          <label>Intervalo de datas</label>
          <div>
            <input type="date" id="startDate" value="2024-10-09" />
            <input type="date" id="endDate" value="2024-12-30" />
          </div>
        </div>
        <button class="btn-apply" onclick="applyDateRange()">Aplicar</button>
        <div class="total-streams">
          Total de streams: <span id="totalStreams">0</span>
        </div>
      </div>

      <div class="filter-group">
        <div class="input-group">
          <i class="bi bi-search"></i>
          <input
            type="text"
            id="songSearch"
            placeholder="Pesquisar música"
            onkeyup="filterSongs()"
          />
        </div>
        <div class="input-group">
          <i class="bi bi-filter"></i>
          <input
            type="number"
            id="minStreams"
            placeholder="Streams mínimos"
            oninput="validateStreamsFilter()"
          />
        </div>
        <div class="input-group">
          <i class="bi bi-filter"></i>
          <input
            type="number"
            id="maxStreams"
            placeholder="Streams máximos"
            oninput="validateStreamsFilter()"
          />
        </div>
        <div class="input-group">
          <i class="bi bi-award"></i>
          <select id="awardsFilter" onchange="filterSongs()">
            <option value="all">Todos</option>
            <option value="with">Com prêmios</option>
            <option value="without">Sem prêmios</option>
          </select>
        </div>
        <div class="input-group">
          <i class="bi bi-sort-down"></i>
          <select id="sortOrder" onchange="filterSongs()">
            <option value="desc">Streams (Decrescente)</option>
            <option value="asc">Streams (Crescente)</option>
          </select>
        </div>
        <button
          class="btn-apply"
          id="applyFilters"
          onclick="filterSongs()"
          disabled
        >
          Aplicar
        </button>
      </div>

      <ul class="songs-list" id="songsList"></ul>
    </div>

    <nav class="bottom-nav d-lg-none">
      <ul class="nav justify-content-around">
        <li class="nav-item">
          <a
            class="nav-link"
            href="../painel.html"
            aria-label="Ir para Dashboard"
            ><i class="bi bi-speedometer2"></i><span>Dashboard</span></a
          >
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            href="../launch/releases.html"
            aria-label="Ir para Lançamentos"
            ><i class="bi bi-disc"></i><span>Lançamentos</span></a
          >
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            href="../analytics/statistics.html"
            aria-label="Ir para Estatísticas"
            ><i class="bi bi-bar-chart"></i><span>Estatísticas</span></a
          >
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            href="../finances/overview.html"
            aria-label="Ir para Finanças"
            ><i class="bi bi-currency-dollar"></i><span>Finanças</span></a
          >
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            href="../artists/artists-list.html"
            aria-label="Ir para Artistas"
            ><i class="bi bi-person"></i><span>Artistas</span></a
          >
        </li>
      </ul>
    </nav>

    <!-- Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../js/theme.wp.js"></script>
    <script src="../../js/wp.tools.js"></script>
    <script>
      const tooltipTriggerList = document.querySelectorAll(
        '[data-bs-toggle="tooltip"]'
      );
      const tooltipList = [...tooltipTriggerList].map(
        (tooltipTriggerEl) => new bootstrap.Tooltip(tooltipTriggerEl)
      );
    </script>
    <script>
      // Dados simulados para cada país
      const countryData = {
        Brasil: {
          flag: "https://flagcdn.com/w20/br.png",
          totalStreams: 15000,
          songs: [
            {
              title: "Samba de Verão",
              awards: "Prêmio 27-02-2025",
              streams: 9000,
              cover: "https://via.placeholder.com/40",
            },
            {
              title: "Bossa Nova",
              awards: "",
              streams: 4000,
              cover: "https://via.placeholder.com/40",
            },
            {
              title: "Tropicalia",
              awards: "Prêmio 30-01-2025",
              streams: 2000,
              cover: "https://via.placeholder.com/40",
            },
          ],
        },
        Angola: {
          flag: "https://flagcdn.com/w20/ao.png",
          totalStreams: 8000,
          songs: [
            {
              title: "Hosana",
              awards: "Prêmio 27-02-2025",
              streams: 10000,
              cover: "https://via.placeholder.com/40",
            },
            {
              title: "God Knows",
              awards: "Prêmio 30-01-2025",
              streams: 5000,
              cover: "https://via.placeholder.com/40",
            },
            {
              title: "CW Jays",
              awards: "",
              streams: 5000,
              cover: "https://via.placeholder.com/40",
            },
          ],
        },
        Portugal: {
          flag: "https://flagcdn.com/w20/pt.png",
          totalStreams: 2500,
          songs: [
            {
              title: "Fado",
              awards: "Prêmio 15-03-2025",
              streams: 1500,
              cover: "https://via.placeholder.com/40",
            },
            {
              title: "Lisboa",
              awards: "",
              streams: 800,
              cover: "https://via.placeholder.com/40",
            },
            {
              title: "Porto",
              awards: "",
              streams: 200,
              cover: "https://via.placeholder.com/40",
            },
          ],
        },
        USA: {
          flag: "https://flagcdn.com/w20/us.png",
          totalStreams: 500,
          songs: [
            {
              title: "Country Road",
              awards: "",
              streams: 300,
              cover: "https://via.placeholder.com/40",
            },
            {
              title: "Blues Night",
              awards: "Prêmio 20-04-2025",
              streams: 150,
              cover: "https://via.placeholder.com/40",
            },
            {
              title: "Jazz Vibes",
              awards: "",
              streams: 50,
              cover: "https://via.placeholder.com/40",
            },
          ],
        },
      };

      // Carregar dados do país com base no parâmetro da URL
      const urlParams = new URLSearchParams(window.location.search);
      const country = decodeURIComponent(urlParams.get("country") || "Angola"); // Fallback para Angola
      console.log("Parâmetro country:", country);

      const currentData = countryData[country] || countryData["Angola"];
      console.log("Dados carregados:", currentData);

      const countryFlag = document.getElementById("countryFlag");
      const countryName = document.getElementById("countryName");
      const totalStreams = document.getElementById("totalStreams");
      const songsList = document.getElementById("songsList");

      countryFlag.src = currentData.flag;
      countryName.textContent = country;
      totalStreams.textContent = currentData.totalStreams.toLocaleString();

      // Função para carregar músicas
      function loadSongs(songs) {
        songsList.innerHTML = "";
        songs.forEach((song) => {
          const li = document.createElement("li");
          li.innerHTML = `
                    <img src="${song.cover}" alt="${song.title}">
                    <div class="song-info">
                        <div class="song-title">${song.title}</div>
                        <div class="awards">${song.awards || "-"}</div>
                    </div>
                    <div class="song-streams">${song.streams.toLocaleString()} Streams</div>
                `;
          songsList.appendChild(li);
        });
      }

      // Carregar músicas iniciais
      loadSongs(currentData.songs);

      // Aplicar intervalo de datas (placeholder para lógica futura)
      function applyDateRange() {
        const startDate = document.getElementById("startDate").value;
        const endDate = document.getElementById("endDate").value;
        console.log(`Intervalo aplicado: ${startDate} a ${endDate}`);
        filterSongs();
      }

      // Validar filtros de streams
      function validateStreamsFilter() {
        const minStreams = document.getElementById("minStreams").value;
        const maxStreams = document.getElementById("maxStreams").value;
        const applyButton = document.getElementById("applyFilters");
        const isMinValid =
          minStreams === "" || (!isNaN(minStreams) && minStreams >= 0);
        const isMaxValid =
          maxStreams === "" || (!isNaN(maxStreams) && maxStreams >= 0);
        const areBothFilled = minStreams !== "" && maxStreams !== "";
        const isRangeValid = areBothFilled
          ? parseInt(minStreams) <= parseInt(maxStreams)
          : true;
        applyButton.disabled = !(isMinValid && isMaxValid && isRangeValid);
      }

      // Filtrar músicas
      function filterSongs() {
        const searchTerm = document
          .getElementById("songSearch")
          .value.toLowerCase();
        const minStreams =
          parseInt(document.getElementById("minStreams").value) || 0;
        const maxStreams =
          parseInt(document.getElementById("maxStreams").value) ||
          Number.MAX_SAFE_INTEGER;
        const awardsFilter = document.getElementById("awardsFilter").value;
        const sortOrder = document.getElementById("sortOrder").value;

        let filteredSongs = currentData.songs.filter((song) => {
          const matchesSearch = song.title.toLowerCase().includes(searchTerm);
          const matchesStreams =
            song.streams >= minStreams && song.streams <= maxStreams;
          const matchesAwards =
            awardsFilter === "all"
              ? true
              : awardsFilter === "with"
              ? song.awards !== ""
              : song.awards === "";

          return matchesSearch && matchesStreams && matchesAwards;
        });

        filteredSongs.sort((a, b) => {
          return sortOrder === "asc"
            ? a.streams - b.streams
            : b.streams - a.streams;
        });

        const totalFilteredStreams = filteredSongs.reduce(
          (sum, song) => sum + song.streams,
          0
        );
        totalStreams.textContent = totalFilteredStreams.toLocaleString();

        loadSongs(filteredSongs);
      }
    </script>
  </body>
</html>
